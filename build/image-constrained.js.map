{"version":3,"file":"image-constrained.js","mappings":"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CA;WACA;WACA;WACA,+BAA+B,wCAAwC;WACvE;WACA;WACA;WACA;WACA,iBAAiB,qBAAqB;WACtC;WACA;WACA;WACA;WACA,kBAAkB,qBAAqB;WACvC,oHAAoH,iDAAiD;WACrK;WACA,KAAK;WACL;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;;;;WC7BA;WACA;WACA;WACA,eAAe,4BAA4B;WAC3C,eAAe;WACf,iCAAiC,WAAW;WAC5C;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA,8CAA8C;;;;;WCA9C;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;WCNA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA,8CAA8C;;WAE9C;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,iCAAiC,mCAAmC;WACpE;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,MAAM,qBAAqB;WAC3B;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;;;;;UEnDA;UACA;UACA;UACA,uGAAuG,0FAA0F;UACjM","sources":["webpack://resource-blocks/./node_modules/@wordpress/icons/build-module/library/crop.js","webpack://resource-blocks/./node_modules/@wordpress/icons/build-module/library/overlay-text.js","webpack://resource-blocks/./node_modules/@wordpress/icons/build-module/library/upload.js","webpack://resource-blocks/./includes/block-editor/blocks/image-constrained/edit.js","webpack://resource-blocks/./includes/block-editor/blocks/image-constrained/image.js","webpack://resource-blocks/./includes/block-editor/blocks/image-constrained/index.js","webpack://resource-blocks/./includes/block-editor/blocks/image-constrained/save.js","webpack://resource-blocks/./includes/block-editor/blocks/image-constrained/use-client-width.js","webpack://resource-blocks/./node_modules/classnames/index.js","webpack://resource-blocks/./includes/block-editor/blocks/image-constrained/editor.scss","webpack://resource-blocks/./includes/block-editor/blocks/image-constrained/style.scss","webpack://resource-blocks/external window \"lodash\"","webpack://resource-blocks/external window [\"wp\",\"blob\"]","webpack://resource-blocks/external window [\"wp\",\"blockEditor\"]","webpack://resource-blocks/external window [\"wp\",\"blocks\"]","webpack://resource-blocks/external window [\"wp\",\"components\"]","webpack://resource-blocks/external window [\"wp\",\"compose\"]","webpack://resource-blocks/external window [\"wp\",\"coreData\"]","webpack://resource-blocks/external window [\"wp\",\"data\"]","webpack://resource-blocks/external window [\"wp\",\"element\"]","webpack://resource-blocks/external window [\"wp\",\"i18n\"]","webpack://resource-blocks/external window [\"wp\",\"notices\"]","webpack://resource-blocks/external window [\"wp\",\"primitives\"]","webpack://resource-blocks/external window [\"wp\",\"url\"]","webpack://resource-blocks/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://resource-blocks/webpack/bootstrap","webpack://resource-blocks/webpack/runtime/chunk loaded","webpack://resource-blocks/webpack/runtime/compat get default export","webpack://resource-blocks/webpack/runtime/define property getters","webpack://resource-blocks/webpack/runtime/hasOwnProperty shorthand","webpack://resource-blocks/webpack/runtime/make namespace object","webpack://resource-blocks/webpack/runtime/jsonp chunk loading","webpack://resource-blocks/webpack/before-startup","webpack://resource-blocks/webpack/startup","webpack://resource-blocks/webpack/after-startup"],"sourcesContent":["import { createElement } from \"@wordpress/element\";\n\n/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\nconst crop = createElement(SVG, {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\"\n}, createElement(Path, {\n  d: \"M16.5 7.8v7H18v-7c0-1-.8-1.8-1.8-1.8h-7v1.5h7c.2 0 .3.1.3.3zm-8.7 8.7c-.1 0-.2-.1-.2-.2V2H6v4H2v1.5h4v8.8c0 1 .8 1.8 1.8 1.8h8.8v4H18v-4h4v-1.5H7.8z\"\n}));\nexport default crop;\n//# sourceMappingURL=crop.js.map","import { createElement } from \"@wordpress/element\";\n\n/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\nconst overlayText = createElement(SVG, {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\"\n}, createElement(Path, {\n  d: \"M18 4H6c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12-9.8c.4 0 .8-.3.9-.7l1.1-3h3.6l.5 1.7h1.9L13 9h-2.2l-3.4 9.5H6c-.3 0-.5-.2-.5-.5V6c0-.3.2-.5.5-.5h12c.3 0 .5.2.5.5v12H20V6c0-1.1-.9-2-2-2zm-6 7l1.4 3.9h-2.7L12 11z\"\n}));\nexport default overlayText;\n//# sourceMappingURL=overlay-text.js.map","import { createElement } from \"@wordpress/element\";\n\n/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\nconst upload = createElement(SVG, {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\"\n}, createElement(Path, {\n  d: \"M18.5 15v3.5H13V6.7l4.5 4.1 1-1.1-6.2-5.8-5.8 5.8 1 1.1 4-4v11.7h-6V15H4v5h16v-5z\"\n}));\nexport default upload;\n//# sourceMappingURL=upload.js.map","/**\n * External dependencies\n */\nimport classnames from 'classnames';\nimport { get, omit, pick } from 'lodash';\n\n/**\n * WordPress dependencies.\n */\nimport { getBlobByURL, isBlobURL } from '@wordpress/blob';\nimport {\n\tBlockAlignmentControl,\n\tBlockControls,\n\tMediaPlaceholder,\n\tuseBlockProps,\n\tInspectorControls,\n\tstore as blockEditorStore,\n} from '@wordpress/block-editor';\nimport { PanelBody, TextControl, withNotices } from '@wordpress/components';\nimport { useEffect, useRef, useState } from '@wordpress/element';\nimport { useSelect } from '@wordpress/data';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies.\n */\nimport Image from './image';\n\n/**\n * Import editor styles.\n */\nimport './editor.scss';\n\nexport const pickRelevantMediaFiles = ( image, size ) => {\n\tconst imageProps = pick( image, [ 'alt', 'id', 'link', 'caption' ] );\n\timageProps.url =\n\t\tget( image, [ 'sizes', size, 'url' ] ) ||\n\t\tget( image, [ 'media_details', 'sizes', size, 'source_url' ] ) ||\n\t\timage.url;\n\treturn imageProps;\n};\n\n/**\n * Is the URL a temporary blob URL? A blob URL is one that is used temporarily\n * while the image is being uploaded and will not have an id yet allocated.\n *\n * @param {number=} id  The id of the image.\n * @param {string=} url The url of the image.\n *\n * @return {boolean} Is the URL a Blob URL?\n */\nconst isTemporaryImage = ( id, url ) => ! id && isBlobURL( url );\n\n/**\n * Checks if a media attachment object has been \"destroyed\",\n * that is, removed from the media library. The core Media Library\n * adds a `destroyed` property to a deleted attachment object in the media collection.\n *\n * @param {number} id The attachment id.\n *\n * @return {boolean} Whether the image has been destroyed.\n */\nexport function isMediaDestroyed( id ) {\n\tconst attachment = wp?.media?.attachment( id ) || {};\n\treturn attachment.destroyed;\n}\n\n/**\n * Edit function.\n *\n * @param {WPElement} root0\n * @param {WPElement} root0.attributes\n * @param {WPElement} root0.setAttributes\n *\n * @return {WPElement} Element to render.\n */\n\nexport function Edit( {\n\tattributes,\n\tsetAttributes,\n\tisSelected,\n\tclassName,\n\tnoticeUI,\n\tinsertBlocksAfter,\n\tnoticeOperations,\n\tonReplace,\n\tcontext,\n\tclientId,\n} ) {\n\tconst {\n\t\turl = '',\n\t\talt,\n\t\tcaption,\n\t\talign,\n\t\tid,\n\t\twidth,\n\t\tdesignWidth,\n\t\theight,\n\t\tdesignHeight,\n\t} = attributes;\n\n\tconst [ temporaryURL, setTemporaryURL ] = useState();\n\n\tconst altRef = useRef();\n\tuseEffect( () => {\n\t\taltRef.current = alt;\n\t}, [ alt ] );\n\n\tconst captionRef = useRef();\n\tuseEffect( () => {\n\t\tcaptionRef.current = caption;\n\t}, [ caption ] );\n\n\tconst ref = useRef();\n\n\tconst { imageDefaultSize, mediaUpload } = useSelect( ( select ) => {\n\t\tconst { getSettings } = select( blockEditorStore );\n\t\treturn pick( getSettings(), [ 'imageDefaultSize', 'mediaUpload' ] );\n\t}, [] );\n\n\t// A callback passed to MediaUpload,\n\t// fired when the media modal closes.\n\tfunction onCloseModal() {\n\t\tif ( isMediaDestroyed( attributes?.id ) ) {\n\t\t\tsetAttributes( {\n\t\t\t\turl: undefined,\n\t\t\t\tid: undefined,\n\t\t\t} );\n\t\t}\n\t}\n\n\t/*\n\t\t Runs an error callback if the image does not load.\n\t\t If the error callback is triggered, we infer that that image\n\t\t has been deleted.\n\t*/\n\tfunction onImageError( isReplaced = false ) {\n\t\t// If the image block was not replaced with an embed,\n\t\t// clear the attributes and trigger the placeholder.\n\t\tif ( ! isReplaced ) {\n\t\t\tsetAttributes( {\n\t\t\t\turl: undefined,\n\t\t\t\tid: undefined,\n\t\t\t} );\n\t\t}\n\t}\n\n\tfunction onSetDesignWidth( value ) {\n\t\tsetAttributes( { designWidth: value } );\n\t}\n\n\tfunction onSetDesignHeight( value ) {\n\t\tsetAttributes( { designHeight: value } );\n\t}\n\n\tconst mediaPreview = !! url && (\n\t\t<img\n\t\t\talt={ __( 'Edit image' ) }\n\t\t\ttitle={ __( 'Edit image' ) }\n\t\t\tclassName={ 'edit-image-preview' }\n\t\t\tsrc={ url }\n\t\t/>\n\t);\n\n\tconst classes = classnames( className, 'size-full', {\n\t\t'is-transient': temporaryURL,\n\t\t'is-resized': !! width || !! height,\n\t} );\n\n\tconst blockProps = useBlockProps( {\n\t\tref,\n\t\tclassName: classes,\n\t} );\n\n\tfunction onUploadError( message ) {\n\t\tnoticeOperations.removeAllNotices();\n\t\tnoticeOperations.createErrorNotice( message );\n\t\tsetAttributes( {\n\t\t\tsrc: undefined,\n\t\t\tid: undefined,\n\t\t\turl: undefined,\n\t\t} );\n\t\tsetTemporaryURL( undefined );\n\t}\n\n\tfunction onSelectImage( media ) {\n\t\tif ( ! media || ! media.url ) {\n\t\t\tsetAttributes( {\n\t\t\t\turl: undefined,\n\t\t\t\talt: undefined,\n\t\t\t\tid: undefined,\n\t\t\t\ttitle: undefined,\n\t\t\t\tcaption: undefined,\n\t\t\t} );\n\n\t\t\treturn;\n\t\t}\n\n\t\tif ( isBlobURL( media.url ) ) {\n\t\t\tsetTemporaryURL( media.url );\n\t\t\treturn;\n\t\t}\n\n\t\tsetTemporaryURL();\n\n\t\tlet mediaAttributes = pickRelevantMediaFiles( media, imageDefaultSize );\n\n\t\t// If a caption text was meanwhile written by the user,\n\t\t// make sure the text is not overwritten by empty captions.\n\t\tif ( captionRef.current && ! get( mediaAttributes, [ 'caption' ] ) ) {\n\t\t\tmediaAttributes = omit( mediaAttributes, [ 'caption' ] );\n\t\t}\n\n\t\tlet additionalAttributes;\n\t\t// Reset the dimension attributes if changing to a different image.\n\t\tif ( ! media.id || media.id !== id ) {\n\t\t\tadditionalAttributes = {\n\t\t\t\twidth: undefined,\n\t\t\t\theight: undefined,\n\t\t\t};\n\t\t} else {\n\t\t\t// Keep the same url when selecting the same file, so \"Image Size\"\n\t\t\t// option is not changed.\n\t\t\tadditionalAttributes = { url };\n\t\t}\n\n\t\t// Check if default link setting should be used.\n\t\tlet linkDestination = attributes.linkDestination;\n\t\tif ( ! linkDestination ) {\n\t\t\t// Use the WordPress option to determine the proper default.\n\t\t\t// The constants used in Gutenberg do not match WP options so a little more complicated than ideal.\n\t\t\t// TODO: fix this in a follow up PR, requires updating media-text and ui component.\n\t\t\tswitch ( wp?.media?.view?.settings?.defaultProps?.link || 'none' ) {\n\t\t\t\tcase 'file':\n\t\t\t\tcase 'media':\n\t\t\t\t\tlinkDestination = 'media';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'post':\n\t\t\t\tcase 'attachment':\n\t\t\t\t\tlinkDestination = 'attachment';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'custom':\n\t\t\t\t\tlinkDestination = 'custom';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'none':\n\t\t\t\t\tlinkDestination = 'none';\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\t// Check if the image is linked to its media.\n\t\tlet href;\n\t\tswitch ( linkDestination ) {\n\t\t\tcase 'media':\n\t\t\t\thref = media.url;\n\t\t\t\tbreak;\n\t\t\tcase 'attachment':\n\t\t\t\thref = media.link;\n\t\t\t\tbreak;\n\t\t}\n\t\tmediaAttributes.href = href;\n\n\t\tsetAttributes( {\n\t\t\t...mediaAttributes,\n\t\t\t...additionalAttributes,\n\t\t\tlinkDestination,\n\t\t} );\n\t}\n\n\tfunction updateAlignment( nextAlign ) {\n\t\tconst extraUpdatedAttributes = [ 'wide', 'full' ].includes( nextAlign )\n\t\t\t? { width: undefined, height: undefined }\n\t\t\t: {};\n\t\tsetAttributes( {\n\t\t\t...extraUpdatedAttributes,\n\t\t\talign: nextAlign,\n\t\t} );\n\t}\n\n\tlet isTemp = isTemporaryImage( id, url );\n\n\t// Upload a temporary image on mount.\n\tuseEffect( () => {\n\t\tif ( ! isTemp ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst file = getBlobByURL( url );\n\n\t\tif ( file ) {\n\t\t\tmediaUpload( {\n\t\t\t\tfilesList: [ file ],\n\t\t\t\tonFileChange: ( [ img ] ) => {\n\t\t\t\t\tonSelectImage( img );\n\t\t\t\t},\n\t\t\t\tallowedTypes: [ 'image' ],\n\t\t\t\tonError: ( message ) => {\n\t\t\t\t\tisTemp = false;\n\t\t\t\t\tonUploadError( message );\n\t\t\t\t},\n\t\t\t} );\n\t\t}\n\t}, [] );\n\n\treturn (\n\t\t<>\n\t\t\t<figure\n\t\t\t\t{ ...blockProps }\n\t\t\t\tdata-design-width={ designWidth }\n\t\t\t\tdata-design-height={ designHeight }\n\t\t\t>\n\t\t\t\t{ ( temporaryURL || url ) && (\n\t\t\t\t\t<Image\n\t\t\t\t\t\ttemporaryURL={ temporaryURL }\n\t\t\t\t\t\tattributes={ attributes }\n\t\t\t\t\t\tsetAttributes={ setAttributes }\n\t\t\t\t\t\tisSelected={ isSelected }\n\t\t\t\t\t\tinsertBlocksAfter={ insertBlocksAfter }\n\t\t\t\t\t\tonReplace={ onReplace }\n\t\t\t\t\t\tonSelectImage={ onSelectImage }\n\t\t\t\t\t\tonUploadError={ onUploadError }\n\t\t\t\t\t\tcontainerRef={ ref }\n\t\t\t\t\t\tcontext={ context }\n\t\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\t\tonCloseModal={ onCloseModal }\n\t\t\t\t\t\tonImageLoadError={ onImageError }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t{ ! url && (\n\t\t\t\t\t<BlockControls group=\"block\">\n\t\t\t\t\t\t<BlockAlignmentControl\n\t\t\t\t\t\t\tvalue={ align }\n\t\t\t\t\t\t\tonChange={ updateAlignment }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</BlockControls>\n\t\t\t\t) }\n\t\t\t\t<MediaPlaceholder\n\t\t\t\t\tmultiple={ false }\n\t\t\t\t\tlabels={ {\n\t\t\t\t\t\ttitle: __( 'Image [Size Constrained]' ),\n\t\t\t\t\t\tinstructions: __(\n\t\t\t\t\t\t\t'Upload an image file, or pick one from the media library.'\n\t\t\t\t\t\t),\n\t\t\t\t\t} }\n\t\t\t\t\tdisableDropZone={ true }\n\t\t\t\t\tonSelect={ onSelectImage }\n\t\t\t\t\tnotices={ noticeUI }\n\t\t\t\t\tonError={ onUploadError }\n\t\t\t\t\tonClose={ onCloseModal }\n\t\t\t\t\taccept=\"image/*\"\n\t\t\t\t\tallowedTypes={ [ 'image' ] }\n\t\t\t\t\tvalue={ { id } }\n\t\t\t\t\tmediaPreview={ mediaPreview }\n\t\t\t\t\tdisableMediaButtons={ temporaryURL || url }\n\t\t\t\t\t// onFilesPreUpload={ onFilesPreUpload }\n\t\t\t\t\t// handleUpload={ false }\n\t\t\t\t/>\n\t\t\t\t<InspectorControls>\n\t\t\t\t\t<PanelBody title={ __( 'Image design size' ) }>\n\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\tlabel={ __( 'Width:' ) }\n\t\t\t\t\t\t\tvalue={ designWidth || '' }\n\t\t\t\t\t\t\tonChange={ onSetDesignWidth }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\tlabel={ __( 'Height:' ) }\n\t\t\t\t\t\t\tvalue={ designHeight || '' }\n\t\t\t\t\t\t\tonChange={ onSetDesignHeight }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</PanelBody>\n\t\t\t\t</InspectorControls>\n\t\t\t</figure>\n\t\t</>\n\t);\n}\n\nexport default withNotices( Edit );\n","/**\n * External dependencies.\n */\nimport { pick, includes } from 'lodash';\n\n/**\n * WordPress dependencies.\n */\nimport { isBlobURL } from '@wordpress/blob';\nimport {\n\tExternalLink,\n\tPanelBody,\n\tResizableBox,\n\tSpinner,\n\tTextareaControl,\n\tTextControl,\n\tToolbarButton,\n} from '@wordpress/components';\nimport { useViewportMatch, usePrevious } from '@wordpress/compose';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport {\n\tBlockControls,\n\tInspectorControls,\n\tRichText,\n\t__experimentalImageURLInputUI as ImageURLInputUI,\n\tMediaReplaceFlow,\n\tstore as blockEditorStore,\n\tBlockAlignmentControl,\n\t__experimentalImageEditor as ImageEditor,\n\t__experimentalImageEditingProvider as ImageEditingProvider,\n} from '@wordpress/block-editor';\nimport { useEffect, useMemo, useState, useRef } from '@wordpress/element';\nimport { __, sprintf, isRTL } from '@wordpress/i18n';\nimport { getFilename } from '@wordpress/url';\nimport { createBlock, switchToBlockType } from '@wordpress/blocks';\nimport { crop, overlayText, upload } from '@wordpress/icons';\nimport { store as noticesStore } from '@wordpress/notices';\nimport { store as coreStore } from '@wordpress/core-data';\n\n/**\n * Internal dependencies.\n */\nimport useClientWidth from './use-client-width';\nimport { isMediaDestroyed } from './edit';\n\nexport default function Image( {\n\ttemporaryURL,\n\tattributes: {\n\t\turl = '',\n\t\talt,\n\t\tcaption,\n\t\talign,\n\t\tid,\n\t\thref,\n\t\trel,\n\t\tlinkClass,\n\t\tlinkDestination,\n\t\ttitle,\n\t\twidth,\n\t\theight,\n\t\tlinkTarget,\n\t},\n\tsetAttributes,\n\tisSelected,\n\tinsertBlocksAfter,\n\tonCloseModal,\n\tonSelectImage,\n\tonSelectURL,\n\tonUploadError,\n\tcontainerRef,\n\tcontext,\n\tclientId,\n\tonImageLoadError,\n} ) {\n\tconst imageRef = useRef();\n\tconst captionRef = useRef();\n\tconst prevUrl = usePrevious( url );\n\tconst { allowResize = true } = context;\n\tconst { getBlock } = useSelect( blockEditorStore );\n\n\tconst { image } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getMedia } = select( coreStore );\n\t\t\treturn {\n\t\t\t\timage:\n\t\t\t\t\tid && isSelected\n\t\t\t\t\t\t? getMedia( id, { context: 'view' } )\n\t\t\t\t\t\t: null,\n\t\t\t};\n\t\t},\n\t\t[ id, isSelected ]\n\t);\n\tconst { canInsertCover, imageEditing, maxWidth, mediaUpload } = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetBlockRootClientId,\n\t\t\t\tgetSettings,\n\t\t\t\tcanInsertBlockType,\n\t\t\t} = select( blockEditorStore );\n\n\t\t\tconst rootClientId = getBlockRootClientId( clientId );\n\t\t\tconst settings = pick( getSettings(), [\n\t\t\t\t'imageEditing',\n\t\t\t\t'imageSizes',\n\t\t\t\t'maxWidth',\n\t\t\t\t'mediaUpload',\n\t\t\t] );\n\n\t\t\treturn {\n\t\t\t\t...settings,\n\t\t\t\tcanInsertCover: canInsertBlockType(\n\t\t\t\t\t'core/cover',\n\t\t\t\t\trootClientId\n\t\t\t\t),\n\t\t\t};\n\t\t},\n\t\t[ clientId ]\n\t);\n\tconst { replaceBlocks, toggleSelection } = useDispatch( blockEditorStore );\n\tconst { createErrorNotice, createSuccessNotice } = useDispatch(\n\t\tnoticesStore\n\t);\n\tconst isLargeViewport = useViewportMatch( 'medium' );\n\tconst isWideAligned = includes( [ 'wide', 'full' ], align );\n\tconst [\n\t\t{ loadedNaturalWidth, loadedNaturalHeight },\n\t\tsetLoadedNaturalSize,\n\t] = useState( {} );\n\tconst [ isEditingImage, setIsEditingImage ] = useState( false );\n\tconst [ externalBlob, setExternalBlob ] = useState();\n\tconst clientWidth = useClientWidth( containerRef, [ align ] );\n\tconst isResizable = allowResize && ! ( isWideAligned && isLargeViewport );\n\n\t// Focus the caption after inserting an image from the placeholder. This is\n\t// done to preserve the behaviour of focussing the first tabbable element\n\t// when a block is mounted. Previously, the image block would remount when\n\t// the placeholder is removed. Maybe this behaviour could be removed.\n\tuseEffect( () => {\n\t\tif ( url && ! prevUrl && isSelected ) {\n\t\t\tcaptionRef.current.focus();\n\t\t}\n\t}, [ url, prevUrl ] );\n\n\t// Get naturalWidth and naturalHeight from image ref, and fall back to loaded natural\n\t// width and height. This resolves an issue in Safari where the loaded natural\n\t// width and height is otherwise lost when switching between alignments.\n\t// See: https://github.com/WordPress/gutenberg/pull/37210.\n\tconst { naturalWidth, naturalHeight } = useMemo( () => {\n\t\treturn {\n\t\t\tnaturalWidth:\n\t\t\t\timageRef.current?.naturalWidth ||\n\t\t\t\tloadedNaturalWidth ||\n\t\t\t\tundefined,\n\t\t\tnaturalHeight:\n\t\t\t\timageRef.current?.naturalHeight ||\n\t\t\t\tloadedNaturalHeight ||\n\t\t\t\tundefined,\n\t\t};\n\t}, [\n\t\tloadedNaturalWidth,\n\t\tloadedNaturalHeight,\n\t\timageRef.current?.complete,\n\t] );\n\n\tfunction onResizeStart() {\n\t\ttoggleSelection( false );\n\t}\n\n\tfunction onResizeStop() {\n\t\ttoggleSelection( true );\n\t}\n\n\tfunction onSetHref( props ) {\n\t\tsetAttributes( props );\n\t}\n\n\tfunction onSetTitle( value ) {\n\t\t// This is the HTML title attribute, separate from the media object\n\t\t// title.\n\t\tsetAttributes( { title: value } );\n\t}\n\n\tfunction updateAlt( newAlt ) {\n\t\tsetAttributes( { alt: newAlt } );\n\t}\n\n\tfunction uploadExternal() {\n\t\tmediaUpload( {\n\t\t\tfilesList: [ externalBlob ],\n\t\t\tonFileChange( [ img ] ) {\n\t\t\t\tonSelectImage( img );\n\n\t\t\t\tif ( isBlobURL( img.url ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tsetExternalBlob();\n\t\t\t\tcreateSuccessNotice( __( 'Image uploaded.' ), {\n\t\t\t\t\ttype: 'snackbar',\n\t\t\t\t} );\n\t\t\t},\n\t\t\tallowedTypes: [ 'image' ],\n\t\t\tonError( message ) {\n\t\t\t\tcreateErrorNotice( message, { type: 'snackbar' } );\n\t\t\t},\n\t\t} );\n\t}\n\n\tfunction updateAlignment( nextAlign ) {\n\t\tconst extraUpdatedAttributes = [ 'wide', 'full' ].includes( nextAlign )\n\t\t\t? { width: undefined, height: undefined }\n\t\t\t: {};\n\t\tsetAttributes( {\n\t\t\t...extraUpdatedAttributes,\n\t\t\talign: nextAlign,\n\t\t} );\n\t}\n\n\tuseEffect( () => {\n\t\tif ( ! isSelected ) {\n\t\t\tsetIsEditingImage( false );\n\t\t}\n\t\tif ( isSelected && isMediaDestroyed( id ) ) {\n\t\t\tonImageLoadError();\n\t\t}\n\t}, [ isSelected ] );\n\n\tconst canEditImage = id && naturalWidth && naturalHeight && imageEditing;\n\tconst allowCrop = canEditImage && ! isEditingImage;\n\n\tfunction switchToCover() {\n\t\treplaceBlocks(\n\t\t\tclientId,\n\t\t\tswitchToBlockType( getBlock( clientId ), 'core/cover' )\n\t\t);\n\t}\n\n\tconst controls = (\n\t\t<>\n\t\t\t<BlockControls group=\"block\">\n\t\t\t\t<BlockAlignmentControl\n\t\t\t\t\tvalue={ align }\n\t\t\t\t\tonChange={ updateAlignment }\n\t\t\t\t/>\n\t\t\t\t{ ! isEditingImage && (\n\t\t\t\t\t<ImageURLInputUI\n\t\t\t\t\t\turl={ href || '' }\n\t\t\t\t\t\tonChangeUrl={ onSetHref }\n\t\t\t\t\t\tlinkDestination={ linkDestination }\n\t\t\t\t\t\tmediaUrl={ ( image && image.source_url ) || url }\n\t\t\t\t\t\tmediaLink={ image && image.link }\n\t\t\t\t\t\tlinkTarget={ linkTarget }\n\t\t\t\t\t\tlinkClass={ linkClass }\n\t\t\t\t\t\trel={ rel }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t{ allowCrop && (\n\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\tonClick={ () => setIsEditingImage( true ) }\n\t\t\t\t\t\ticon={ crop }\n\t\t\t\t\t\tlabel={ __( 'Crop' ) }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t{ externalBlob && (\n\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\tonClick={ uploadExternal }\n\t\t\t\t\t\ticon={ upload }\n\t\t\t\t\t\tlabel={ __( 'Upload external image' ) }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t{ canInsertCover && (\n\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\ticon={ overlayText }\n\t\t\t\t\t\tlabel={ __( 'Add text over image' ) }\n\t\t\t\t\t\tonClick={ switchToCover }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</BlockControls>\n\t\t\t{ ! isEditingImage && (\n\t\t\t\t<BlockControls group=\"other\">\n\t\t\t\t\t<MediaReplaceFlow\n\t\t\t\t\t\tmediaId={ id }\n\t\t\t\t\t\tmediaURL={ url }\n\t\t\t\t\t\tallowedTypes={ [ 'image' ] }\n\t\t\t\t\t\taccept=\"image/*\"\n\t\t\t\t\t\tonSelect={ onSelectImage }\n\t\t\t\t\t\tonSelectURL={ onSelectURL }\n\t\t\t\t\t\tonError={ onUploadError }\n\t\t\t\t\t\tonCloseModal={ onCloseModal }\n\t\t\t\t\t/>\n\t\t\t\t</BlockControls>\n\t\t\t) }\n\t\t\t<InspectorControls>\n\t\t\t\t<PanelBody title={ __( 'Image settings' ) }>\n\t\t\t\t\t<TextareaControl\n\t\t\t\t\t\tlabel={ __( 'Alt text (alternative text)' ) }\n\t\t\t\t\t\tvalue={ alt }\n\t\t\t\t\t\tonChange={ updateAlt }\n\t\t\t\t\t\thelp={\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<ExternalLink href=\"https://www.w3.org/WAI/tutorials/images/decision-tree\">\n\t\t\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t\t\t'Describe the purpose of the image'\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t</ExternalLink>\n\t\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t\t'Leave empty if the image is purely decorative.'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\t\t\t<InspectorControls __experimentalGroup=\"advanced\">\n\t\t\t\t<TextControl\n\t\t\t\t\tlabel={ __( 'Title attribute' ) }\n\t\t\t\t\tvalue={ title || '' }\n\t\t\t\t\tonChange={ onSetTitle }\n\t\t\t\t\thelp={\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t'Describe the role of this image on the page.'\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t<ExternalLink href=\"https://www.w3.org/TR/html52/dom.html#the-title-attribute\">\n\t\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t\t'(Note: many devices and browsers do not display this text.)'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</ExternalLink>\n\t\t\t\t\t\t</>\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t</InspectorControls>\n\t\t</>\n\t);\n\n\tconst filename = getFilename( url );\n\tlet defaultedAlt;\n\n\tif ( alt ) {\n\t\tdefaultedAlt = alt;\n\t} else if ( filename ) {\n\t\tdefaultedAlt = sprintf(\n\t\t\t// eslint-disable-next-line @wordpress/i18n-translator-comments\n\t\t\t__( 'This image has an empty alt attribute; its file name is %s' ),\n\t\t\tfilename\n\t\t);\n\t} else {\n\t\tdefaultedAlt = __( 'This image has an empty alt attribute' );\n\t}\n\n\tlet img = (\n\t\t// Disable reason: Image itself is not meant to be interactive, but\n\t\t// should direct focus to block.\n\t\t/* eslint-disable jsx-a11y/no-noninteractive-element-interactions, jsx-a11y/click-events-have-key-events */\n\t\t<>\n\t\t\t<img\n\t\t\t\tsrc={ temporaryURL || url }\n\t\t\t\talt={ defaultedAlt }\n\t\t\t\tonLoad={ ( event ) => {\n\t\t\t\t\tsetLoadedNaturalSize( {\n\t\t\t\t\t\tloadedNaturalWidth: event.target?.naturalWidth,\n\t\t\t\t\t\tloadedNaturalHeight: event.target?.naturalHeight,\n\t\t\t\t\t} );\n\t\t\t\t} }\n\t\t\t\tref={ imageRef }\n\t\t\t/>\n\t\t\t{ temporaryURL && <Spinner /> }\n\t\t</>\n\t\t/* eslint-enable jsx-a11y/no-noninteractive-element-interactions, jsx-a11y/click-events-have-key-events */\n\t);\n\n\tlet imageWidthWithinContainer;\n\tlet imageHeightWithinContainer;\n\n\tif ( clientWidth && naturalWidth && naturalHeight ) {\n\t\tconst exceedMaxWidth = naturalWidth > clientWidth;\n\t\tconst ratio = naturalHeight / naturalWidth;\n\t\timageWidthWithinContainer = exceedMaxWidth ? clientWidth : naturalWidth;\n\t\timageHeightWithinContainer = exceedMaxWidth\n\t\t\t? clientWidth * ratio\n\t\t\t: naturalHeight;\n\t}\n\n\tif ( canEditImage && isEditingImage ) {\n\t\timg = (\n\t\t\t<ImageEditor\n\t\t\t\turl={ url }\n\t\t\t\twidth={ width }\n\t\t\t\theight={ height }\n\t\t\t\tclientWidth={ clientWidth }\n\t\t\t\tnaturalHeight={ naturalHeight }\n\t\t\t\tnaturalWidth={ naturalWidth }\n\t\t\t/>\n\t\t);\n\t} else if ( ! isResizable || ! imageWidthWithinContainer ) {\n\t\timg = <div style={ { width, height } }>{ img }</div>;\n\t} else {\n\t\tconst currentWidth = width || imageWidthWithinContainer;\n\t\tconst currentHeight = height || imageHeightWithinContainer;\n\n\t\tconst ratio = naturalWidth / naturalHeight;\n\t\tconst minWidth = naturalWidth < naturalHeight ? 20 : 20 * ratio;\n\t\tconst minHeight = naturalHeight < naturalWidth ? 20 : 20 / ratio;\n\n\t\t// With the current implementation of ResizableBox, an image needs an\n\t\t// explicit pixel value for the max-width. In absence of being able to\n\t\t// set the content-width, this max-width is currently dictated by the\n\t\t// vanilla editor style. The following variable adds a buffer to this\n\t\t// vanilla style, so 3rd party themes have some wiggle room. This does,\n\t\t// in most cases, allow you to scale the image beyond the width of the\n\t\t// main column, though not infinitely.\n\t\t// @todo It would be good to revisit this once a content-width variable\n\t\t// becomes available.\n\t\tconst maxWidthBuffer = maxWidth * 2.5;\n\n\t\tlet showRightHandle = false;\n\t\tlet showLeftHandle = false;\n\n\t\t/* eslint-disable no-lonely-if */\n\t\t// See https://github.com/WordPress/gutenberg/issues/7584.\n\t\tif ( align === 'center' ) {\n\t\t\t// When the image is centered, show both handles.\n\t\t\tshowRightHandle = true;\n\t\t\tshowLeftHandle = true;\n\t\t} else if ( isRTL() ) {\n\t\t\t// In RTL mode the image is on the right by default.\n\t\t\t// Show the right handle and hide the left handle only when it is\n\t\t\t// aligned left. Otherwise, always show the left handle.\n\t\t\tif ( align === 'left' ) {\n\t\t\t\tshowRightHandle = true;\n\t\t\t} else {\n\t\t\t\tshowLeftHandle = true;\n\t\t\t}\n\t\t} else {\n\t\t\t// Show the left handle and hide the right handle only when the\n\t\t\t// image is aligned right. Otherwise, always show the right handle.\n\t\t\tif ( align === 'right' ) {\n\t\t\t\tshowLeftHandle = true;\n\t\t\t} else {\n\t\t\t\tshowRightHandle = true;\n\t\t\t}\n\t\t}\n\t\t/* eslint-enable no-lonely-if */\n\n\t\timg = (\n\t\t\t<ResizableBox\n\t\t\t\tsize={ {\n\t\t\t\t\twidth: width ?? 'auto',\n\t\t\t\t\theight: height ?? 'auto',\n\t\t\t\t} }\n\t\t\t\tshowHandle={ isSelected }\n\t\t\t\tminWidth={ minWidth }\n\t\t\t\tmaxWidth={ maxWidthBuffer }\n\t\t\t\tminHeight={ minHeight }\n\t\t\t\tmaxHeight={ maxWidthBuffer / ratio }\n\t\t\t\tlockAspectRatio\n\t\t\t\tenable={ {\n\t\t\t\t\ttop: false,\n\t\t\t\t\tright: showRightHandle,\n\t\t\t\t\tbottom: true,\n\t\t\t\t\tleft: showLeftHandle,\n\t\t\t\t} }\n\t\t\t\tonResizeStart={ onResizeStart }\n\t\t\t\tonResizeStop={ ( event, direction, elt, delta ) => {\n\t\t\t\t\tonResizeStop();\n\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\twidth: parseInt( currentWidth + delta.width, 10 ),\n\t\t\t\t\t\theight: parseInt( currentHeight + delta.height, 10 ),\n\t\t\t\t\t} );\n\t\t\t\t} }\n\t\t\t>\n\t\t\t\t{ img }\n\t\t\t</ResizableBox>\n\t\t);\n\t}\n\n\treturn (\n\t\t<ImageEditingProvider\n\t\t\tid={ id }\n\t\t\turl={ url }\n\t\t\tnaturalWidth={ naturalWidth }\n\t\t\tnaturalHeight={ naturalHeight }\n\t\t\tclientWidth={ clientWidth }\n\t\t\tonSaveImage={ ( imageAttributes ) =>\n\t\t\t\tsetAttributes( imageAttributes )\n\t\t\t}\n\t\t\tisEditing={ isEditingImage }\n\t\t\tonFinishEditing={ () => setIsEditingImage( false ) }\n\t\t>\n\t\t\t{ /* Hide controls during upload to avoid component remount,\n\t\t\t\twhich causes duplicated image upload. */ }\n\t\t\t{ ! temporaryURL && controls }\n\t\t\t{ img }\n\t\t\t{ ( ! RichText.isEmpty( caption ) || isSelected ) && (\n\t\t\t\t<RichText\n\t\t\t\t\tref={ captionRef }\n\t\t\t\t\ttagName=\"figcaption\"\n\t\t\t\t\taria-label={ __( 'Image caption text' ) }\n\t\t\t\t\tplaceholder={ __( 'Add caption' ) }\n\t\t\t\t\tvalue={ caption }\n\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\tsetAttributes( { caption: value } )\n\t\t\t\t\t}\n\t\t\t\t\tinlineToolbar\n\t\t\t\t\t__unstableOnSplitAtEnd={ () =>\n\t\t\t\t\t\tinsertBlocksAfter( createBlock( 'core/paragraph' ) )\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t) }\n\t\t</ImageEditingProvider>\n\t);\n}\n","/**\n * WordPress dependencies.\n */\nimport { registerBlockType } from '@wordpress/blocks';\n\n/**\n * Import styles.\n */\nimport './style.scss';\n\n/**\n * Internal dependencies.\n */\nimport json from './block.json';\nimport edit from './edit';\nimport save from './save';\n\nconst { name, ...settings } = json;\n\n/**\n * Extend wp.media.view.Attachment.Library.\n *\n * This extends the render method of the media library. It gets the current\n * attribute values designHeight & designWidth from the currently selected\n * block and compares the values against the images in the media library.\n *\n * Any images that don't equal the attribute values are disabled from being\n * selected by the user.\n *\n * @private\n */\nconst _AttachmentLibrary = wp.media.view.Attachment.Library;\n\nwp.media.view.Attachment.Library = _AttachmentLibrary.extend( {\n\trender() {\n\t\tconst designWidth = wp.data\n\t\t\t.select( 'core/block-editor' )\n\t\t\t.getSelectedBlock().attributes.designWidth;\n\n\t\tconst designHeight = wp.data\n\t\t\t.select( 'core/block-editor' )\n\t\t\t.getSelectedBlock().attributes.designHeight;\n\n\t\tif ( '' !== designWidth ) {\n\t\t\tif ( parseInt( designWidth ) !== this.model.attributes.width ) {\n\t\t\t\tthis.$el.addClass( 'resource-disabled' );\n\t\t\t}\n\t\t}\n\n\t\tif ( '' !== designHeight ) {\n\t\t\tif ( parseInt( designHeight ) !== this.model.attributes.height ) {\n\t\t\t\tthis.$el.addClass( 'resource-disabled' );\n\t\t\t}\n\t\t}\n\n\t\treturn _AttachmentLibrary.prototype.render.apply( this, arguments );\n\t},\n} );\n\n/**\n * Register block.\n */\nregisterBlockType( name, {\n\t...settings,\n\t/**\n\t * @see ./edit.js\n\t */\n\tedit,\n\n\t/**\n\t * @see ./save.js\n\t */\n\tsave,\n} );\n","/**\n * External dependencies.\n */\nimport classnames from 'classnames';\nimport { isEmpty } from 'lodash';\n\n/**\n * WordPress dependencies.\n */\nimport { RichText, useBlockProps } from '@wordpress/block-editor';\n\nexport default function save( { attributes } ) {\n\tconst {\n\t\turl,\n\t\talt,\n\t\tcaption,\n\t\talign,\n\t\thref,\n\t\trel,\n\t\tlinkClass,\n\t\twidth,\n\t\tdesignWidth,\n\t\theight,\n\t\tdesignHeight,\n\t\tid,\n\t\tlinkTarget,\n\t\tsizeSlug,\n\t\ttitle,\n\t} = attributes;\n\n\tconst newRel = isEmpty( rel ) ? undefined : rel;\n\n\tconst classes = classnames( {\n\t\t[ `align${ align }` ]: align,\n\t\t[ `size-${ sizeSlug }` ]: sizeSlug,\n\t\t'is-resized': width || height,\n\t} );\n\n\tconst image = (\n\t\t<img\n\t\t\tsrc={ url }\n\t\t\talt={ alt }\n\t\t\tclassName={ id ? `wp-image-${ id }` : null }\n\t\t\twidth={ width }\n\t\t\theight={ height }\n\t\t\ttitle={ title }\n\t\t\tdata-design-width={ designWidth }\n\t\t\tdata-design-height={ designHeight }\n\t\t/>\n\t);\n\n\tconst figure = (\n\t\t<>\n\t\t\t{ href ? (\n\t\t\t\t<a\n\t\t\t\t\tclassName={ linkClass }\n\t\t\t\t\thref={ href }\n\t\t\t\t\ttarget={ linkTarget }\n\t\t\t\t\trel={ newRel }\n\t\t\t\t>\n\t\t\t\t\t{ image }\n\t\t\t\t</a>\n\t\t\t) : (\n\t\t\t\timage\n\t\t\t) }\n\t\t\t{ ! RichText.isEmpty( caption ) && (\n\t\t\t\t<RichText.Content tagName=\"figcaption\" value={ caption } />\n\t\t\t) }\n\t\t</>\n\t);\n\n\treturn (\n\t\t<figure\n\t\t\t{ ...useBlockProps.save( {\n\t\t\t\tclassName: classes,\n\t\t\t} ) }\n\t\t>\n\t\t\t{ figure }\n\t\t</figure>\n\t);\n}\n","/**\n * WordPress dependencies.\n */\nimport { useState, useEffect } from '@wordpress/element';\n\nexport default function useClientWidth( ref, dependencies ) {\n\tconst [ clientWidth, setClientWidth ] = useState();\n\n\tfunction calculateClientWidth() {\n\t\tsetClientWidth( ref.current.clientWidth );\n\t}\n\n\tuseEffect( calculateClientWidth, dependencies );\n\tuseEffect( () => {\n\t\tconst { defaultView } = ref.current.ownerDocument;\n\n\t\tdefaultView.addEventListener( 'resize', calculateClientWidth );\n\n\t\treturn () => {\n\t\t\tdefaultView.removeEventListener( 'resize', calculateClientWidth );\n\t\t};\n\t}, [] );\n\n\treturn clientWidth;\n}\n","/*!\n  Copyright (c) 2018 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames() {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg)) {\n\t\t\t\tif (arg.length) {\n\t\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\t\tif (inner) {\n\t\t\t\t\t\tclasses.push(inner);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tif (arg.toString === Object.prototype.toString) {\n\t\t\t\t\tfor (var key in arg) {\n\t\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tclasses.push(arg.toString());\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","module.exports = window[\"lodash\"];","module.exports = window[\"wp\"][\"blob\"];","module.exports = window[\"wp\"][\"blockEditor\"];","module.exports = window[\"wp\"][\"blocks\"];","module.exports = window[\"wp\"][\"components\"];","module.exports = window[\"wp\"][\"compose\"];","module.exports = window[\"wp\"][\"coreData\"];","module.exports = window[\"wp\"][\"data\"];","module.exports = window[\"wp\"][\"element\"];","module.exports = window[\"wp\"][\"i18n\"];","module.exports = window[\"wp\"][\"notices\"];","module.exports = window[\"wp\"][\"primitives\"];","module.exports = window[\"wp\"][\"url\"];","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t\"image-constrained\": 0,\n\t\"./style-image-constrained\": 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkresource_blocks\"] = self[\"webpackChunkresource_blocks\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [\"./style-image-constrained\"], function() { return __webpack_require__(\"./includes/block-editor/blocks/image-constrained/index.js\"); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n",""],"names":["classnames","get","omit","pick","getBlobByURL","isBlobURL","BlockAlignmentControl","BlockControls","MediaPlaceholder","useBlockProps","InspectorControls","store","blockEditorStore","PanelBody","TextControl","withNotices","useEffect","useRef","useState","useSelect","__","Image","pickRelevantMediaFiles","image","size","imageProps","url","isTemporaryImage","id","isMediaDestroyed","attachment","wp","media","destroyed","Edit","attributes","setAttributes","isSelected","className","noticeUI","insertBlocksAfter","noticeOperations","onReplace","context","clientId","alt","caption","align","width","designWidth","height","designHeight","temporaryURL","setTemporaryURL","altRef","current","captionRef","ref","imageDefaultSize","mediaUpload","select","getSettings","onCloseModal","undefined","onImageError","isReplaced","onSetDesignWidth","value","onSetDesignHeight","mediaPreview","classes","blockProps","onUploadError","message","removeAllNotices","createErrorNotice","src","onSelectImage","title","mediaAttributes","additionalAttributes","linkDestination","view","settings","defaultProps","link","href","updateAlignment","nextAlign","extraUpdatedAttributes","includes","isTemp","file","filesList","onFileChange","img","allowedTypes","onError","instructions","ExternalLink","ResizableBox","Spinner","TextareaControl","ToolbarButton","useViewportMatch","usePrevious","useDispatch","RichText","__experimentalImageURLInputUI","ImageURLInputUI","MediaReplaceFlow","__experimentalImageEditor","ImageEditor","__experimentalImageEditingProvider","ImageEditingProvider","useMemo","sprintf","isRTL","getFilename","createBlock","switchToBlockType","crop","overlayText","upload","noticesStore","coreStore","useClientWidth","rel","linkClass","linkTarget","onSelectURL","containerRef","onImageLoadError","imageRef","prevUrl","allowResize","getBlock","getMedia","canInsertCover","imageEditing","maxWidth","getBlockRootClientId","canInsertBlockType","rootClientId","replaceBlocks","toggleSelection","createSuccessNotice","isLargeViewport","isWideAligned","loadedNaturalWidth","loadedNaturalHeight","setLoadedNaturalSize","isEditingImage","setIsEditingImage","externalBlob","setExternalBlob","clientWidth","isResizable","focus","naturalWidth","naturalHeight","complete","onResizeStart","onResizeStop","onSetHref","props","onSetTitle","updateAlt","newAlt","uploadExternal","type","canEditImage","allowCrop","switchToCover","controls","source_url","filename","defaultedAlt","event","target","imageWidthWithinContainer","imageHeightWithinContainer","exceedMaxWidth","ratio","currentWidth","currentHeight","minWidth","minHeight","maxWidthBuffer","showRightHandle","showLeftHandle","top","right","bottom","left","direction","elt","delta","parseInt","imageAttributes","isEmpty","registerBlockType","json","edit","save","name","_AttachmentLibrary","Attachment","Library","extend","render","data","getSelectedBlock","model","$el","addClass","prototype","apply","arguments","sizeSlug","newRel","figure","dependencies","setClientWidth","calculateClientWidth","defaultView","ownerDocument","addEventListener","removeEventListener"],"sourceRoot":""}